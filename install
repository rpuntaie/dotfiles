#!/usr/bin/bash

#according rpuntaie-meta on https://github.com/rpuntaie/rollarch

dotfilesurl=https://github.com/rpuntaie/dotfiles
cd ~

if [[ -d dotfiles ]]; then
  cd dotfiles
  if [[ ! "$(git config --get remote.origin.url)"=="$dotfilesurl" ]]; then
    echo "This install script is for a different dotfiles" >&2
    exit 1
  fi
  cd ..
else
  git clone $dotfilesurl
fi

if [[ -d .local ]]; then
  stow --no-folding -R -t .local dotfiles 
else
  mkdir .local
  stow --no-folding -S -t .local dotfiles 
fi
cd dotfiles
stow home
cd ..
ln -sf .local/etc/xmonad .xmonad
xmonad --recompile

pip install --user rstdoc #documentation
#pip install --user sphinxcontrib-tikz #documentation
##pip install --user git+https://bitbucket.org/philexander/tikz\#egg=sphinxcontrib-tikz
#pip install --user sphinxcontrib-texfigure #documentation
#pip install --user sphinxcontrib-thm #documentation
pip install --user when-changed #... file/dir -c command
pip install --user astropy #science
pip install --user pygame #graphics
pip install --user bottle #web framework
pip install --user cookiecutter #template projects
pip install --user pymunk #2D physics engine
yay -S --needed --noconfirm plantuml #for rstdoc
yay -S --needed --noconfirm wordnet-cli #used in vim
yay -S --needed --noconfirm waf-git #to build

echo -e "\033[0;32mLog out and in, to activate the environment."
