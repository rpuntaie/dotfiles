#!/usr/bin/bash

#according rpuntaie-meta on https://github.com/rpuntaie/rollarch

dotfilesurl=https://github.com/rpuntaie/dotfiles
cd ~

if [[ -d dotfiles ]]; then
  cd dotfiles
  if [[ ! "$(git config --get remote.origin.url)"=="$dotfilesurl" ]]; then
    echo "This install script is for a different dotfiles" >&2
    exit 1
  fi
  cd ~
  bash ~/dotfiles/bin/restowdots
else
  #if .dotfiles exits: $new_install=true ~/dotfiles/install
  new_install=true
  git clone $dotfilesurl
  rm -rf .local
  bash ~/dotfiles/bin/restowdots -S
fi

if [[ -n $new_install ]] && $new_install; then
  fc-cache -fv
  pip install --user rstdoc #documentation
  pip install --user autopep8 #used in vim to reformat
  pip install --user doit #automate using dodo.py file
  pip install --user when-changed #... file/dir -c command
  pip install --user astropy #science
  pip install --user pygame #graphics
  pip install --user bottle #web framework
  pip install --user cookiecutter #template projects
  pip install --user pymunk #2D physics engine
fi

echo -e "\033[0;32mLog out and in, to activate the environment. First time vim and zsh will install plugins."

#rollarch interprets lines starting with "^#PKG: " or "^#REPO: "
#rollarch rpuntaie-meta is served from another Arch on the LAN via AIP2
#PKG: rpuntaie-meta

